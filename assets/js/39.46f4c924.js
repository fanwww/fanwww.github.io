(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{312:function(e,t,s){"use strict";s.r(t);var v=s(14),_=Object(v.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"websocket"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#websocket"}},[e._v("#")]),e._v(" websocket")]),e._v(" "),t("h4",{attrs:{id:"属性和方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#属性和方法"}},[e._v("#")]),e._v(" 属性和方法")]),e._v(" "),t("p",[e._v("和使用"),t("code",[e._v("XMLHttpRequest")]),e._v("对象一样，我们首先要实例化一个"),t("code",[e._v("WebSocket")]),e._v("对象：")]),e._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("var")]),e._v(" ws "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("WebSocket")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("url 为响应WebSocket请求的地址，根据后台开启的服务来写。")]),e._v(" "),t("p",[e._v("同样类似AJAX的是，"),t("code",[e._v("WebSocket")]),e._v("对象也有一个"),t("code",[e._v("readyState")]),e._v("属性，用来表示对象实例当前所处的链接状态，有四个值：")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("0")]),e._v("：表示正在连接中（CONNECTING）；")]),e._v(" "),t("li",[t("strong",[e._v("1")]),e._v("：表示连接成功，可以通信（OPEN）；")]),e._v(" "),t("li",[t("strong",[e._v("2")]),e._v("：表示连接正在关闭（CLOSING）；")]),e._v(" "),t("li",[t("strong",[e._v("3")]),e._v("：表示连接已经关闭或打开连接失败（CLOSED）；")])]),e._v(" "),t("p",[e._v("我们可以通过判断这个值来执行我们相应的代码。")]),e._v(" "),t("p",[e._v("除此之外，"),t("code",[e._v("WebSocket")]),e._v("对象还提供给我们一系列事件属性，使我们控制连接过程中的通信行为：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("onopen")]),e._v("：用于指定连接成功后的回调函数；")]),e._v(" "),t("li",[t("code",[e._v("onclose")]),e._v("：用于指定连接关闭后的回调函数；")]),e._v(" "),t("li",[t("code",[e._v("onmessage")]),e._v("：用于指定收到服务器数据后的回调函数，通过"),t("code",[e._v("形参.data")]),e._v("获取到返回的数据 ；")]),e._v(" "),t("li",[t("code",[e._v("onerror")]),e._v("：用于指定报错时的回调函数；")])]),e._v(" "),t("p",[e._v("通过"),t("code",[e._v(".send()")]),e._v("方法，我们拥有了向服务器发送数据的能力。")])])}),[],!1,null,null,null);t.default=_.exports}}]);