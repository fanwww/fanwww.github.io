<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>二、函数高级 | SuperFan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/logo.jpg">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.2df1fec4.css" as="style"><link rel="preload" href="/assets/js/app.468d81f0.js" as="script"><link rel="preload" href="/assets/js/3.98f38222.js" as="script"><link rel="preload" href="/assets/js/5.659b15cb.js" as="script"><link rel="prefetch" href="/assets/js/10.75acb69d.js"><link rel="prefetch" href="/assets/js/100.62ab1ac5.js"><link rel="prefetch" href="/assets/js/101.083c1407.js"><link rel="prefetch" href="/assets/js/102.aa2a3c9d.js"><link rel="prefetch" href="/assets/js/103.7f7aec22.js"><link rel="prefetch" href="/assets/js/104.5858c5d9.js"><link rel="prefetch" href="/assets/js/105.46ed2904.js"><link rel="prefetch" href="/assets/js/106.d0dc0e90.js"><link rel="prefetch" href="/assets/js/107.3e0b5d6c.js"><link rel="prefetch" href="/assets/js/108.10369f73.js"><link rel="prefetch" href="/assets/js/109.1e2a4664.js"><link rel="prefetch" href="/assets/js/11.a07021ac.js"><link rel="prefetch" href="/assets/js/110.9a3785b6.js"><link rel="prefetch" href="/assets/js/111.177df3f2.js"><link rel="prefetch" href="/assets/js/112.281ea3ba.js"><link rel="prefetch" href="/assets/js/113.bb855529.js"><link rel="prefetch" href="/assets/js/114.99002bd6.js"><link rel="prefetch" href="/assets/js/115.ae84ff88.js"><link rel="prefetch" href="/assets/js/116.84ccabcf.js"><link rel="prefetch" href="/assets/js/117.08946e95.js"><link rel="prefetch" href="/assets/js/118.1116fe87.js"><link rel="prefetch" href="/assets/js/119.d056f04c.js"><link rel="prefetch" href="/assets/js/12.e1bf2385.js"><link rel="prefetch" href="/assets/js/120.f6c88d2d.js"><link rel="prefetch" href="/assets/js/121.fbb232a1.js"><link rel="prefetch" href="/assets/js/122.9738257b.js"><link rel="prefetch" href="/assets/js/123.4cd19117.js"><link rel="prefetch" href="/assets/js/124.3adb9591.js"><link rel="prefetch" href="/assets/js/13.89bf61e3.js"><link rel="prefetch" href="/assets/js/14.29e5bf16.js"><link rel="prefetch" href="/assets/js/15.9e13d335.js"><link rel="prefetch" href="/assets/js/16.f59fe652.js"><link rel="prefetch" href="/assets/js/17.2b6daac8.js"><link rel="prefetch" href="/assets/js/18.392684c5.js"><link rel="prefetch" href="/assets/js/19.cf8ae039.js"><link rel="prefetch" href="/assets/js/2.12b7e717.js"><link rel="prefetch" href="/assets/js/20.bf25a080.js"><link rel="prefetch" href="/assets/js/21.22619a21.js"><link rel="prefetch" href="/assets/js/22.a74b4412.js"><link rel="prefetch" href="/assets/js/23.83a3d3ea.js"><link rel="prefetch" href="/assets/js/24.ad3c232b.js"><link rel="prefetch" href="/assets/js/25.203130d6.js"><link rel="prefetch" href="/assets/js/26.e7b1aae9.js"><link rel="prefetch" href="/assets/js/27.f21654a0.js"><link rel="prefetch" href="/assets/js/28.6a0cccf9.js"><link rel="prefetch" href="/assets/js/29.78506971.js"><link rel="prefetch" href="/assets/js/30.a505f2c7.js"><link rel="prefetch" href="/assets/js/31.3762b301.js"><link rel="prefetch" href="/assets/js/32.a495ece4.js"><link rel="prefetch" href="/assets/js/33.4bae10a8.js"><link rel="prefetch" href="/assets/js/34.e47c40fc.js"><link rel="prefetch" href="/assets/js/35.ae8b060d.js"><link rel="prefetch" href="/assets/js/36.289c9f35.js"><link rel="prefetch" href="/assets/js/37.40971406.js"><link rel="prefetch" href="/assets/js/38.ecdf1421.js"><link rel="prefetch" href="/assets/js/39.272e2c70.js"><link rel="prefetch" href="/assets/js/4.3996b12f.js"><link rel="prefetch" href="/assets/js/40.a3c4e368.js"><link rel="prefetch" href="/assets/js/41.a03ab0f7.js"><link rel="prefetch" href="/assets/js/42.7827a99e.js"><link rel="prefetch" href="/assets/js/43.253384ea.js"><link rel="prefetch" href="/assets/js/44.cce7af31.js"><link rel="prefetch" href="/assets/js/45.f7db15e7.js"><link rel="prefetch" href="/assets/js/46.42bde79f.js"><link rel="prefetch" href="/assets/js/47.a0709ecf.js"><link rel="prefetch" href="/assets/js/48.286feac2.js"><link rel="prefetch" href="/assets/js/49.744a0ee4.js"><link rel="prefetch" href="/assets/js/50.d58c4700.js"><link rel="prefetch" href="/assets/js/51.9d3f2eed.js"><link rel="prefetch" href="/assets/js/52.e1c1a139.js"><link rel="prefetch" href="/assets/js/53.57cd749c.js"><link rel="prefetch" href="/assets/js/54.2e796520.js"><link rel="prefetch" href="/assets/js/55.40b3bcf4.js"><link rel="prefetch" href="/assets/js/56.9d4c5aca.js"><link rel="prefetch" href="/assets/js/57.40d7ce46.js"><link rel="prefetch" href="/assets/js/58.a74801f1.js"><link rel="prefetch" href="/assets/js/59.2a8ddfc6.js"><link rel="prefetch" href="/assets/js/6.d4ab18a7.js"><link rel="prefetch" href="/assets/js/60.e50e788a.js"><link rel="prefetch" href="/assets/js/61.c24653ba.js"><link rel="prefetch" href="/assets/js/62.45b50a63.js"><link rel="prefetch" href="/assets/js/63.02fc2376.js"><link rel="prefetch" href="/assets/js/64.3596b827.js"><link rel="prefetch" href="/assets/js/65.6861083d.js"><link rel="prefetch" href="/assets/js/66.6a904b26.js"><link rel="prefetch" href="/assets/js/67.95363924.js"><link rel="prefetch" href="/assets/js/68.ce7efd4f.js"><link rel="prefetch" href="/assets/js/69.e5766721.js"><link rel="prefetch" href="/assets/js/7.9344e582.js"><link rel="prefetch" href="/assets/js/70.eefdbfad.js"><link rel="prefetch" href="/assets/js/71.a41b985d.js"><link rel="prefetch" href="/assets/js/72.a15b5895.js"><link rel="prefetch" href="/assets/js/73.6141457f.js"><link rel="prefetch" href="/assets/js/74.424c94b0.js"><link rel="prefetch" href="/assets/js/75.f78247b4.js"><link rel="prefetch" href="/assets/js/76.8d1ddcb9.js"><link rel="prefetch" href="/assets/js/77.0f61cd18.js"><link rel="prefetch" href="/assets/js/78.21ad3c33.js"><link rel="prefetch" href="/assets/js/79.a59a7832.js"><link rel="prefetch" href="/assets/js/8.a4c7dce0.js"><link rel="prefetch" href="/assets/js/80.baca8bea.js"><link rel="prefetch" href="/assets/js/81.37d7a0b6.js"><link rel="prefetch" href="/assets/js/82.7e4c40b6.js"><link rel="prefetch" href="/assets/js/83.6ea2beeb.js"><link rel="prefetch" href="/assets/js/84.5ea3690c.js"><link rel="prefetch" href="/assets/js/85.6e4ae2a9.js"><link rel="prefetch" href="/assets/js/86.51cfa15f.js"><link rel="prefetch" href="/assets/js/87.2cfe5a5a.js"><link rel="prefetch" href="/assets/js/88.dddbcfdb.js"><link rel="prefetch" href="/assets/js/89.e6e7ab1c.js"><link rel="prefetch" href="/assets/js/9.978b2f04.js"><link rel="prefetch" href="/assets/js/90.7676beac.js"><link rel="prefetch" href="/assets/js/91.6e16a261.js"><link rel="prefetch" href="/assets/js/92.ddaeebf3.js"><link rel="prefetch" href="/assets/js/93.936f44c6.js"><link rel="prefetch" href="/assets/js/94.7a5bd4d7.js"><link rel="prefetch" href="/assets/js/95.16098644.js"><link rel="prefetch" href="/assets/js/96.a21a769e.js"><link rel="prefetch" href="/assets/js/97.ad16dbd7.js"><link rel="prefetch" href="/assets/js/98.aaf8d8a4.js"><link rel="prefetch" href="/assets/js/99.90c32a33.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2df1fec4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="SuperFan" class="logo"> <span class="site-name can-hide">SuperFan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/resources/website/websites_recom.html" class="nav-link">
  Resources
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/html&amp;css/form.html" class="nav-link">
  HTML&amp;CSS
</a></li><li class="dropdown-subitem"><a href="/notes/js/js_1.html" class="nav-link">
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4>
          入门
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/es6/es6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-subitem"><a href="/notes/sass/about.html" class="nav-link">
  Sass
</a></li><li class="dropdown-subitem"><a href="/notes/ts/ts_install.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/notes/axios/axios.html" class="nav-link">
  axios
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/notes/react/react_base.html" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/wx_mini_p/life_cycle.html" class="nav-link">
  微信小程序
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          WebRTC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontendAdvance/WebRTC/web_rtc_1.html" class="nav-link">
  WebRTC基础
</a></li></ul></li><li class="dropdown-item"><h4>
          前端可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontendAdvance/svg/svg_1.html" class="nav-link">
  SVG
</a></li><li class="dropdown-subitem"><a href="/fontendAdvance/echarts/echarts_1.html" class="nav-link">
  ECharts
</a></li><li class="dropdown-subitem"><a href="/fontendAdvance/handsontable/handsontable_1.html" class="nav-link">
  Handsontable
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontendAdvance/pack_base/rollup&amp;webpack.html" class="nav-link">
  打包基础
</a></li><li class="dropdown-subitem"><a href="/fontendAdvance/webpack/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-subitem"><a href="/fontendAdvance/vite/vite.html" class="nav-link">
  vite
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/node.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/backend/mysql/mysql_note.html" class="nav-link">
  MySql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/git/Git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/other/reg/reg.html" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/other/python/crawler.html" class="nav-link">
  Python
</a></li></ul></div></div> <a href="https://github.com/fanwww/myweb" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/resources/website/websites_recom.html" class="nav-link">
  Resources
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/html&amp;css/form.html" class="nav-link">
  HTML&amp;CSS
</a></li><li class="dropdown-subitem"><a href="/notes/js/js_1.html" class="nav-link">
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4>
          入门
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/es6/es6.html" class="nav-link">
  ES6
</a></li><li class="dropdown-subitem"><a href="/notes/sass/about.html" class="nav-link">
  Sass
</a></li><li class="dropdown-subitem"><a href="/notes/ts/ts_install.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/notes/axios/axios.html" class="nav-link">
  axios
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/notes/react/react_base.html" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notes/wx_mini_p/life_cycle.html" class="nav-link">
  微信小程序
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          WebRTC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontendAdvance/WebRTC/web_rtc_1.html" class="nav-link">
  WebRTC基础
</a></li></ul></li><li class="dropdown-item"><h4>
          前端可视化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontendAdvance/svg/svg_1.html" class="nav-link">
  SVG
</a></li><li class="dropdown-subitem"><a href="/fontendAdvance/echarts/echarts_1.html" class="nav-link">
  ECharts
</a></li><li class="dropdown-subitem"><a href="/fontendAdvance/handsontable/handsontable_1.html" class="nav-link">
  Handsontable
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontendAdvance/pack_base/rollup&amp;webpack.html" class="nav-link">
  打包基础
</a></li><li class="dropdown-subitem"><a href="/fontendAdvance/webpack/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-subitem"><a href="/fontendAdvance/vite/vite.html" class="nav-link">
  vite
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/nodejs/node.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/backend/mysql/mysql_note.html" class="nav-link">
  MySql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/git/Git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/other/reg/reg.html" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/other/python/crawler.html" class="nav-link">
  Python
</a></li></ul></div></div> <a href="https://github.com/fanwww/myweb" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/notes/js/js_1.html" class="sidebar-link">JavaScript 基础</a></li><li><a href="/notes/js/js_2.html" class="sidebar-link">JavaScript 基础总结</a></li><li><a href="/notes/js/js_3.html" aria-current="page" class="active sidebar-link">JavaScript 函数高级</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#_1、原型与原型链" class="sidebar-link">1、原型与原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#i-原型-prototype" class="sidebar-link">Ⅰ-原型 [prototype]</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#ii-显式原型与隐式原型" class="sidebar-link">Ⅱ-显式原型与隐式原型</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iii-原型链" class="sidebar-link">Ⅲ-原型链</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iv-instanceof" class="sidebar-link">Ⅳ-instanceof</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#v-相关面试题" class="sidebar-link">Ⅴ-相关面试题</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#_2、执行上下文与执行上下文栈" class="sidebar-link">2、执行上下文与执行上下文栈</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#i-变量提升与函数提升" class="sidebar-link">Ⅰ-变量提升与函数提升</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#ii-执行上下文" class="sidebar-link">Ⅱ-执行上下文</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iii-执行上下文栈" class="sidebar-link">Ⅲ-执行上下文栈</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iv-相关面试题" class="sidebar-link">Ⅳ-相关面试题</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#_3、作用域与作用域链" class="sidebar-link">3、作用域与作用域链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#i-作用域" class="sidebar-link">Ⅰ-作用域</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#ii-作用域与执行上下文的区别与联系" class="sidebar-link">Ⅱ-作用域与执行上下文的区别与联系</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iii-作用域链" class="sidebar-link">Ⅲ-作用域链</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iv-相关面试题-2" class="sidebar-link">Ⅳ-相关面试题</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#_4、闭包预备知识点梳理" class="sidebar-link">4、闭包预备知识点梳理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#i-举个栗子分析执行上下文" class="sidebar-link">Ⅰ- 举个栗子分析执行上下文</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#ii-举个栗子分析词法作用域" class="sidebar-link">Ⅱ-举个栗子分析词法作用域</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iii-返回函数的函数-高阶函数" class="sidebar-link">Ⅲ- 返回函数的函数[高阶函数]</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#_5、闭包" class="sidebar-link">5、闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#i-引出闭包概念" class="sidebar-link">Ⅰ-引出闭包概念</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#ii-举个闭包栗子分析理解" class="sidebar-link">Ⅱ-举个闭包栗子分析理解</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iii-常见的闭包" class="sidebar-link">Ⅲ-常见的闭包</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#iv-闭包的作用" class="sidebar-link">Ⅳ-闭包的作用</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#v-闭包的生命周期" class="sidebar-link">Ⅴ-闭包的生命周期</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#vi-闭包的应用" class="sidebar-link">Ⅵ-闭包的应用</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#vii-闭包的缺点及解决" class="sidebar-link">Ⅶ-闭包的缺点及解决</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#viii-内存溢出与内存泄露" class="sidebar-link">Ⅷ-内存溢出与内存泄露</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#ix-相关面试题1" class="sidebar-link">Ⅸ-相关面试题1</a></li><li class="sidebar-sub-header"><a href="/notes/js/js_3.html#x-相关面试题2" class="sidebar-link">Ⅹ-相关面试题2</a></li></ul></li></ul></li><li><a href="/notes/js/js_4.html" class="sidebar-link">JavaScript 面向对象高级</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="二、函数高级"><a href="#二、函数高级" class="header-anchor">#</a> 二、函数高级</h1> <h2 id="_1、原型与原型链"><a href="#_1、原型与原型链" class="header-anchor">#</a> 1、原型与原型链</h2> <h3 id="i-原型-prototype"><a href="#i-原型-prototype" class="header-anchor">#</a> Ⅰ-原型 [prototype]</h3> <blockquote><ol><li>函数的<code>prototype</code>属性</li></ol> <ul><li>每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)</li> <li>原型对象中有一个属性constructor, 它指向函数对象</li> <li><img src="/assets/img/image-20210714201049312.bd0e771b.png" alt="image-20210714201049312"></li></ul> <ol start="2"><li>给原型对象添加属性(<code>一般都是方法</code>)</li></ol> <ul><li>作用: 函数的所有实例对象自动拥有原型中的属性(方法)</li></ul> <ol start="3"><li>代码示例</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token keyword">typeof</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">Fun</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>  <span class="token comment">// 默认指向一个Object空对象(没有我们的属性)</span>

  <span class="token comment">// 原型对象中有一个属性constructor, 它指向函数对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Date<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Fun<span class="token punctuation">)</span>

  <span class="token comment">//给原型对象添加属性(一般是方法) ===&gt;实例对象可以访问</span>
  <span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test()'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token keyword">var</span> fun <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fun<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></blockquote> <h3 id="ii-显式原型与隐式原型"><a href="#ii-显式原型与隐式原型" class="header-anchor">#</a> Ⅱ-显式原型与隐式原型</h3> <blockquote><ol><li><p>每个函数function都有一个<code>prototype</code>，即<code>显式</code>原型(属性)</p></li> <li><p>每个实例对象都有一个[<code>__ proto __</code>]，可称为<code>隐式</code>原型(属性)</p></li> <li><p>对象的隐式原型的值为其对应构造函数的显式原型的值</p></li> <li><p>内存结构</p></li></ol> <p><img src="/assets/img/image-20210714203043314.24e19bc4.png" alt="image-20210714203043314"></p> <ol start="5"><li>总结:</li></ol> <ul><li>函数的[<code>prototype</code>]属性: 在定义函数时自动添加的, 默认值是一个空Object对象</li> <li>对象的[<code>__ proto __</code>]属性: 创建对象时自动添加的, <code>默认值为构造函数的prototype属性值</code></li> <li>程序员能直接操作显式原型, 但不能直接操作隐式原型(ES6之前)</li></ul> <ol start="6"><li>代码示例:</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//定义构造函数</span>
<span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// 内部默认执行语句: this.prototype = {}</span>
  <span class="token punctuation">}</span>
<span class="token comment">// 1. 每个函数function都有一个prototype，即显式原型属性, 默认指向一个空的Object对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">// 2. 每个实例对象都有一个__proto__，可称为隐式原型</span>
<span class="token comment">//创建实例对象</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 内部默认执行语句: this.__proto__ = Fn.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span>
<span class="token comment">// 3. 对象的隐式原型的值为其对应构造函数的显式原型的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token operator">===</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token comment">//给原型添加方法</span>
<span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test()'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//通过实例调用原型的方法</span>
fn<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></blockquote> <h3 id="iii-原型链"><a href="#iii-原型链" class="header-anchor">#</a> Ⅲ-原型链</h3> <h4 id="_1-原型链"><a href="#_1-原型链" class="header-anchor">#</a> ① <em>原型链</em></h4> <blockquote><ol><li>原型链</li></ol> <ul><li>访问一个对象的属性时，
<ul><li>先在自身属性中查找，找到返回</li> <li>如果没有, 再沿着[<code>__ proto __</code>]这条链向上查找, 找到返回</li> <li>如果最终没找到, 返回undefined</li> <li><img src="/assets/img/image-20210714210912653.60a2db64.png" alt="image-20210714210912653"></li></ul></li> <li>别名: 隐式原型链</li> <li>作用: 查找对象的属性(方法)</li></ul></blockquote> <h4 id="_2构造函数-原型-实例对象的关系-图解"><a href="#_2构造函数-原型-实例对象的关系-图解" class="header-anchor">#</a> ②<em>构造函数/原型/实例对象的关系(图解)</em></h4> <blockquote><ol><li><div class="language-js line-numbers-mode"><pre class="language-js"><code></code></pre> <div class="line-numbers-wrapper"></div></div></li></ol> <p>var o1 = new Object();
var o2 = {};</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
![image-20210714212928432](./images/image-20210714212928432.png) 

2. ```js
function Foo(){  }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/assets/img/image-20210714212945164.c6530dd1.png" alt="image-20210714212945164"></p> <p>ps:所有函数的[<code>__ proto __</code>]都是一样的</p></blockquote> <h4 id="_3-属性问题"><a href="#_3-属性问题" class="header-anchor">#</a> ③ <em>属性问题</em></h4> <blockquote><ul><li><p>读取对象的属性值时: 会自动到原型链中查找</p></li> <li><p>设置对象的属性值时: 不会查找原型链, 如果当前对象中没有此属性, 直接添加此属性并设置其值</p></li> <li><p>方法一般定义在原型中, 属性一般通过构造函数定义在对象本身上</p></li> <li><p>代码示例</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'xxx'</span>
  <span class="token keyword">var</span> fn1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn1<span class="token punctuation">)</span> <span class="token comment">//xxx Fn{}</span>

  <span class="token keyword">var</span> fn2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fn2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'yyy'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn2<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn2<span class="token punctuation">)</span> <span class="token comment">//xxx yyy  Fn{a: &quot;yyy&quot;}</span>

  <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  p1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>  <span class="token comment">//Person {name: &quot;Bob&quot;, age: 12}</span>

  <span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  p2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span> <span class="token comment">//Person {name: &quot;Cat&quot;, age: 12}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>__proto__<span class="token operator">===</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// true   --&gt;所以方法一般定义在原型中</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></blockquote> <h3 id="iv-instanceof"><a href="#iv-instanceof" class="header-anchor">#</a> Ⅳ-instanceof</h3> <blockquote><ol><li>instanceof是如何判断的?</li></ol> <ul><li>表达式: A instanceof B</li> <li>如果B函数的显式原型对象在A对象的原型链上, 返回true, 否则返回false</li></ul> <ol start="2"><li>Function是通过new自己产生的实例</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
案例1
 */</span>
<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">Foo</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token comment">/*
案例2
 */</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object <span class="token keyword">instanceof</span>  <span class="token class-name">Foo</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></blockquote> <h3 id="v-相关面试题"><a href="#v-相关面试题" class="header-anchor">#</a> Ⅴ-相关面试题</h3> <blockquote><p>测试题1:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
测试题1
*/</span>
<span class="token keyword">function</span> <span class="token constant">A</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">m</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>n<span class="token punctuation">,</span> b<span class="token punctuation">.</span>m<span class="token punctuation">,</span> c<span class="token punctuation">.</span>n<span class="token punctuation">,</span> c<span class="token punctuation">.</span>m<span class="token punctuation">)</span> <span class="token comment">// 1 undefined 2 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>测试题2:原理看<a href="#%E2%91%A1*%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/%E5%8E%9F%E5%9E%8B/%E5%AE%9E%E4%BE%8B%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%85%B3%E7%B3%BB(%E5%9B%BE%E8%A7%A3)*">②<em>构造函数/原型/实例对象的关系(图解)</em></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
测试题2
*/</span>
<span class="token keyword">function</span> <span class="token constant">F</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a()'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b()'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//a()</span>
f<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//f.b is not a function --&gt;找不到</span>
<span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//a()</span>
<span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//b()</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>结果图例</p> <p><img src="/assets/img/image-20210723173855550.5bd30d21.png" alt="image-20210723173855550"></p></blockquote> <h2 id="_2、执行上下文与执行上下文栈"><a href="#_2、执行上下文与执行上下文栈" class="header-anchor">#</a> 2、执行上下文与执行上下文栈</h2> <blockquote><blockquote><p>当代码在 JavaScript 中运行时，执行代码的环境非常重要，并将概括为以下几点：</p> <p><strong>全局代码</strong>——第一次执行代码的默认环境。</p> <p><strong>函数代码</strong>——当执行流进入函数体时。</p> <p>(…) —— 我们当作 执行上下文 是当前代码执行的一个环境与范围。</p></blockquote> <p>换句话说，当我们启动程序时，我们从全局执行上下文中开始。一些变量是在全局执行上下文中声明的。我们称之为全局变量。当程序调用一个函数时，会发生什么?</p> <p>以下几个步骤：</p> <ul><li>JavaScript 创建一个新的执行上下文，我们叫作本地执行上下文。</li> <li>这个本地执行上下文将有它自己的一组变量，这些变量将是这个执行上下文的本地变量。</li> <li>新的执行上下文被推到到执行堆栈中。可以将执行堆栈看作是一种保存程序在其执行中的位置的容器。</li></ul> <p>函数什么时候结束?当它遇到一个 return 语句或一个结束括号}。</p> <p>当一个函数结束时，会发生以下情况:</p> <ul><li>这个本地执行上下文从执行堆栈中弹出。</li> <li>函数将返回值返回调用上下文。调用上下文是调用这个本地的执行上下文，它可以是全局执行上下文，也可以是另外一个本地的执行上下文。这取决于调用执行上下文来处理此时的返回值，返回的值可以是一个对象、一个数组、一个函数、一个布尔值等等，如果函数没有 return 语句，则返回 undefined。</li> <li>这个本地执行上下文被销毁，销毁是很重要，这个本地执行上下文中声明的所有变量都将被删除，不在有变量，这个就是为什么 称为本地执行上下文中自有的变量。</li></ul> <p>此图出于CSDN的<a href="https://blog.csdn.net/wangfeijiu" target="_blank" rel="noopener noreferrer">Free Joe<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/assets/img/image-20210723181727823.5afa6123.png" alt="image-20210723181727823"></p></blockquote> <h3 id="i-变量提升与函数提升"><a href="#i-变量提升与函数提升" class="header-anchor">#</a> Ⅰ-变量提升与函数提升</h3> <blockquote><ol><li>变量声明提升</li></ol> <ul><li>通过var定义(声明)的变量, 在定义语句之前就可以访问到</li> <li>值: undefined</li></ul> <ol start="2"><li>函数声明提升</li></ol> <ul><li>通过function声明的函数, 在之前就可以直接调用</li> <li>值: 函数定义(对象)</li></ul> <ol start="3"><li>引出一个问题: 变量提升和函数提升是如何产生的?</li></ol> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">/*
面试题 : 输出 undefined
 */</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">4</span> <span class="token comment">//变量提升</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//undefined</span>
<span class="token string">'--------------------------------------------'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">//undefined  变量提升</span>
<span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//可调用  函数提升</span>
<span class="token comment">// fn3() //不能  变量提升</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn2()'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn3()'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></blockquote> <h3 id="ii-执行上下文"><a href="#ii-执行上下文" class="header-anchor">#</a> Ⅱ-执行上下文</h3> <blockquote><ol><li>代码分类(位置)</li></ol> <ul><li>全局代码</li> <li>函数(局部)代码</li></ul> <ol start="2"><li>全局执行上下文</li></ol> <ul><li>在执行全局代码前将window确定为全局执行上下文</li> <li>对全局数据进行预处理
<ul><li>var定义的全局变量==&gt;undefined, 添加为window的属性</li> <li>function声明的全局函数==&gt;赋值(fun), 添加为window的方法</li> <li>this==&gt;赋值(window)</li></ul></li> <li>开始执行全局代码</li></ul> <ol start="3"><li>函数执行上下文</li></ol> <ul><li>在调用函数, 准备执行函数体之前, 创建对应的函数执行上下文对象(虚拟的, 存在于栈中)</li> <li>对局部数据进行预处理
<ul><li>形参变量==&gt;赋值(实参)==&gt;添加为执行上下文的属性</li> <li><code>arguments</code>==&gt;赋值(实参列表), 添加为执行上下文的属性 --&gt;<a href="https://developer.mozilla.org/zh-CN/docs/orphaned/Web/JavaScript/Reference/Functions/arguments" target="_blank" rel="noopener noreferrer">不懂的同学看这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>var定义的局部变量==&gt;undefined, 添加为执行上下文的属性</li> <li>function声明的函数 ==&gt;赋值(fun), 添加为执行上下文的方法</li> <li>this==&gt;赋值(调用函数的对象)</li></ul></li> <li>开始执行函数体代码</li></ul></blockquote> <h3 id="iii-执行上下文栈"><a href="#iii-执行上下文栈" class="header-anchor">#</a> Ⅲ-执行上下文栈</h3> <blockquote><ol><li>在全局代码执行前, JS引擎就会创建一个栈来存储管理所有的执行上下文对象</li> <li>在全局执行上下文(window)确定后, 将其添加到栈中(压栈)--&gt;<code>所以栈底百分百是[window]</code></li> <li>在函数执行上下文创建后, 将其添加到栈中(压栈)</li> <li>在当前函数执行完后,将栈顶的对象移除(出栈)</li> <li>当所有的代码执行完后, 栈中只剩下window</li> <li><code>上下文栈数==函数调用数+1</code></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//1. 进入全局执行上下文</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">5</span>
 <span class="token function">foo</span><span class="token punctuation">(</span>x <span class="token operator">+</span> b<span class="token punctuation">)</span>   <span class="token comment">//3. 进入foo执行上下文           </span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">5</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> c <span class="token operator">+</span> y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">//2. 进入bar函数执行上下文</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA20AAACzCAYAAAAaLvQIAAAVyklEQVR4nO3dbcid5X0A8P+TGFtfK1upneiIJuroukKb1pdW6xBqnq1V0kFJvnRk1ZUZ3IcxakDED0EKTWFQkPihVWRSWP0kq1sTSgM1wlI3Oxit8yVZnQ2ugbn6njYJPvsQzsnJ7bnPc7+dc1/XOb8fSJ7nud/+z+Hvc1//6+W+l1ZWVlYCAACAJK3pOwAAAADKKdoAAAASpmgDAABImKINAAAgYYo2AACAhCnaAAAAEqZoAwAASJiiDQAAIGGKNgAAgIQp2gAAABKmaAMAAEiYog0AACBhijYAAICEKdoAAAASdlbfAQBQbmlpqe8QmCMrKyt9hwBAA6VFm4YCXemzkSCP6ZIGLwDQByNtAMDU6DyjKzrOWGSKNoBMaLDQhKIJIH+VijYNBepKsZEgj2kixVwGABaLkTYAYCZ0nlFXLh1nucRJmqr8bfTIfwAAgIQp2gAAABJmeiQAAHTENGCqqDul1kgbAABAwhRtAAAACVO0AQAAJEzRBgAAkDBFGwAAQMIUbQAAAAlTtAEAACRM0QYAAJAwRRsAAEDCFG0AAAAJU7QBAAAkTNEGAACQMEUbAABAwhRtAAAACVO0AQAAJEzRBgAAkDBFGwAAQMIUbQAAAAlTtAEAACRM0QYAAJAwRRsAAEDCFG0AAAAJU7QBAAAkTNEGAACQMEUbAABAws7qOwAAmvvhwefiW9/dH6++/nbfodCziy44J7bfdn1s3byp71AA6JiRNoCMKdgYeO3NY7HnsSf7DgOAKVC0AWRMwcao4ydO9h0CAFNgeiTAnLh4o2lxi+rooWf6DgGAKTLSBgAAkDBFGwAAQMIUbQAAAAlTtAEAACRM0QZAbx6/7+a5vV7ZtWb9OwOQP0+PBCBpTYqcLbv2l/788ftuLt3eJo5J5yweO/p9k1gAWCyKNgCSNq6oaVp4VTWuQCter04M44rFaf8OAMwPRRsAERHxl39yVXz+U5dGRMQ//euR+PYPXug5onYmjYyVbRsUUYN/uyysRgs3BRsAdSjaAIiIiM9+9OK5KNYGqoxqtZkqWXbcaEE4WqQVt5siCUBVijYAIiLignPWxf+8+s7Mr1tlKuJqx6dU9IwbpUspPgDyo2gDWHAf+f2L4uvbPxEREXcsXxV3LF8VW3btjz13XRf/fvj/hlMmIyLueeSn8ezLr3V6/bYFTZXphnXXlI0bGRstxqqco+x842IDgEk88h9gwT378mvDwuE7e184o4j4/KcujXse+Wls2bU/nj/yRtx12x/0FeZExSmIXZxvdJSsbI1bnesOzjP6HwBUYaQNgFJPP/+/w5G1Az/7VWy96fKeI2qu7YNAyo6pej7vZwOgKUUbAJVdcM669/xs9KmTEadG6554+sgsw4qIatMM2zy5sYtpnEUKOQCqULQB0Mq3f/BCNk+cbDLSVlzTNs6ktXHj1sIBQB2KNgAWQvFpjlUfRNJkGmXxuOKauNSeeAlA2hRtAMy1spGy0YeIjNvWVJVRtyo/B4ABRRsAEfHeYmPHAwfP+P6Jp480Xqs2aWpg2ba2hUydaY1V9u0yjq6fdgnAfFtaWVlZGbthaWn4dckuUCqV/EklDvLVdw6tdv3r//ybw68v3rhpJjGRnqOHnhl+/S9//7UztqWewzBJLvmTS5yko27OeE8bAABAwhRtAAAACVO0AQAAJEzRBgAAkDBFGwAAQMIUbQAAAAlTtAEAACTMy7UB5sTou7oAgPlhpA0gY+ef+76+QyAha9e6rQPMI3/dATJ2xxc/E2evM2mCUwXbts2b+g4DgClYWllZWRm7YWlp+HXJLlAqlfxJJQ7y1XcO9X198td3DvV9ffKWS/7kEifpqJszRtoAAAASpmgDAABImKINAAAgYYo2AACAhCnaAAAAEqZoAwAASJiiDQAAIGGKNgAAgISd1XcA0LcfHnwuvvXd/fHq62/3HQo9u+iCc2L7bdfH1s2b+g6lsgM/PxoP73sxfv3W8b5DoWcXnrsuvnTj+rj12sv6DgWAji2tlLyC25vdaSOV/KkSxxf+eo+CjaGz150VP37ob4bf953Lq13/L/7uKQUbQ2eftSYeu+ePz/hZ6jms44yBcR1nfedvVbnESTrq5ozpkSw8DQVGHT9xsu8QalGwMer4yXf7DqE2BRsDr715LPY89mTfYUCSTI+EERdvzGdaHN06euiZvkNo7fH7bu47BHqyZdf+vkNoTMHGqNw6zmBWFG0AQBJ0nC2ueeg4g2kyPRIAACBhijYAAICEKdoAAAASpmiDOTPrh1HM6npl1/Hwjfky+gjkebpe2XVm/fsCkCcPIoEF06TImfRkui279sfj993c6Ol1q8VSds7icaPf5/wUPVbXpMiZ9P6blZWVWFpaavRepdViKTtn8Tjvd5ovTf8epn69suvM+veFRaVogwXT1013XIFWvGbVOMYVihoOi2FcUdO06KpjXIFWvGbVOMYVirP4HUiDjjOgCUUbtPD4fTfHd/a+EE88faTvUGZi0g2+bNvgBj74t6viarShomBrZmlpKQ4cOBA33HBD36HMxKSRsbJtg0Jq8G9XxdVo4aZgWyw6zoAmFG1AZVVu0G16fMvOV9yn+LPifhoOjFNlZKvNVMmy8xX3Kf6suJ8CrjodZ6tv03EG80HRBnOoSo/qpGNTuvmOa2ikFB/dqzIVcdKxKRU940boUoqPvOg4g8WlaIOWfu93zy29WX3jK5+Mqy+9MCIi3jx2Ir78zQMREfGFay6NrTddHv/58utxzdUfjOePvBE7H/63zmJqc8Os2mtad3rMuJv8aEFW5RzjzjUuLqo7cuRI6SjPjh074sEHH4yIiA0bNsShQ4ciIuKpp56K7du3x1e/+tXYuXNn3HnnnbFnz57OYmpT1FSdblh3Xdm40bHRgqzKOcada1xc5E/HGdA1RRu09NmPXjy8ge2567rYc9d1seOBg3HP1o/F628fH2579Gs3xj1bPxZf/95/RETEBeesiw+cd3aSN79pTHcpm5pT7LmtUzQWefx/fffee++wUFheXo7l5eXYu3dv7N69O9avXz/ctnHjxti9e3fcfffdERFx+PDheOmll5IsMqaxTqxsTVtxymOdorHI4/+b0XGm4wwWgaINWvrej38x/Pqfnz4SdyxfFRExLM4GXnn1WHzgvLPP+FmXjYQ+tF3TUHZMlfMp0LrxyCOPDL++995748Ybb4yIGBZnA7fccku89NJLZ/ysy9G1PrR9GEjZMVXOp0Drjo6z6ueM0HEGuVK0QYf+61dvnfH9o1+7MS44Z93w++ePvFHpPPds/Vhcc/UHT3//yE/j2Zdf6ybIiqo2Fto0Ltr2RhdpMLRzySWXnPH9xo0b4/Dhw8Pv77zzzkrn2b17d+zcuXP4/eHDh+OKK67oJsiKqhZgbUbl2k7jLFLINaPjTMcZLAJFG3Toig+fP/x6z13XxSuvHoudD5+ajvONr3yy8nmKjY2UNWkwFKfmjLPaAnsNhu698sorw6+Xl5fjlltuGY6m7dixo/J57r777veM1KWqyUhbcU3bOKs9mVKBNh06zqZzjarH+rsM06Nog5a23nT58HHTf3rNpWc0Cl5/+/jw66svvbBygyEXxYXpVddT1GkojCvwitN8Ulu4n5Pt27cPHzBy//33nzGatn79+uHXDz74YOWRtlwUn+hY9UEkdUbYxhV4xfVxqT3xMmc6znScwbxStEFLT/7s6PDm9eaxE7HjgYMREfHAPz4XX9/+ieG2eSrYym74xXURxW1NTCoC+3pJ7Ty5//77h4XFhg0bYu/evRFxar3ahg0bhtMc56lgKxspKz5QpLitiUlFYJfviVtkOs50nMEiULSRlYf2vRi3b76y7zCGBjepb//ghfdse/bl10pvYk88faT1y2DbvGS17TWr9M5W2berGIrvDUpZSjk8KA62bdv2nm1XXHFFafFwww03tC4sJk0PLNvW1TWrTGussm9XMRRfuE09Os5O03EG80vRRla+/5NfRkQk0+jt0zSeKtblNevG1zaGXBoJcviUaTyOv8tr1o2vbQy5jK6l1OkQoeNs0jV0nMF8UbSRHY1ecieHyZXcPU3HWbvrAfWs6TsAaOL7P/llPLTvxb7DgMbkMLmSuwCzp2gjWxoO5E4Okyu5CzBbijaypuFA7uQwuZK7zBv5TMoUbWRPw4HcyWFyJXeZJ/KZlHkQCb34hx//ovU5br32suGieIvjmTU5DKfIXeaJfCZVijZ60UWDd/AHVaOXPshhcqbTAcrJZ1KkaCNrXTd6jx56ppvAoKIuc9gjt6lKpwNMJp9JjaKN3m276fJWx7dtOJx/7vvirXd+2yoG5sfatfWX+vaZw+e9/6x4+zcnW12f+bF2zdJMr6fjjHmmcCMlijZ617bBG1HecKjiji9+JvY89mQcP6Hhu+jWrl0T2zZvqn1cnzm87abL49EfHY7jJ99tHQN5W7tmKW699rLax+k4IyVNOs6mSeFGKhRtzI2mjd6tmzfF1gYNdehakxy+9drLGjXUYWCanQ5VGro6zhho2nFWZM0m80jRxlwpNhwgN3KYXOk4IxXWbDKP0hqDhg7cvvnKuPzD5/cdBjQmh8nV7ZuvPGPkV+cDORuXz97jRl+MtDF3Htr3YvziV2/1HQY0JofJ2e2br4yf/fev5TBJ6HvNJnRF0cZceWjfi3p2yZocJnc6HUhJ32s2oSumRzI3io1dD2cgN3KY3Mlh5pWpkvTNSBu9a7pgeLT3bFxD4fbNV8YdraOD1clhkMPMv7ojbj88+Fx867v749XX355NgCTrogvOie23Xd/qoUu1izYJyEAXCRjRvsFb1lCo4sDPj8bD+16MX791vFEMzI8Lz10XX7pxfaORgb5yWP4y0Gf+RrT7Oww5Ka7Z/P5Pfln64CjtZQZee/NY7HnsydkWbRKQgS4SsK22DQUNXgbeeOdEPPqjwzOfztUmh+UvA23yV8cZKWjT8TBLxTWbn/v4JXHTH3147L7ay4xq+y7K2kWbBGRU0wRsujB4tHHRRc+uhgKjjp98t/K+KeSw/GVUnfztio4zutJXx1kdbfL94o3eRbiojh56ppPztFrTJgEXV9sE7KLB2/VUnMfvu7nV8eRry679tY9JLYfl7+LqK391nNG1PjoeqjIFmL55EAnZ84eT3MlhZi21TocIHQ+LrEnHQ1XWbDIvFG1kzR9OcieHyZ0cJmV9rtmELnlPG9nyh5PcyWFyJ4eZZwo2UmKkjSx97uOX+MNJ1uQwudOAJVWprNns0uP33TzVaaQpxzGra5ZdJ5XPvteiLZUPQQLm5dMf+VD81eev7juM91haWoqVlZW+w+gljllds+w6qXz2VaWYw6l8hvI3DzodSFmKazZnqer60Gm1A5usT50Uy5Zd+xu1W1eLY9L5iseOft9X+zmbkTYJWC2O3BKwrk9/5EPxt3/2h7F2zVLfobSytFQt/mk15Kpef9SkWFZWVho1PFeLY9L5iseOfp9yA3geclj+VotjHvM3Is1Oh4h0il8dD/MlhYJt0F6s025cbb9pPvinj8GCcb9P8Xp1P7/i/n0PePRWtEnA1S1CAtaVamN3cMOqc+Nabb8mDdOq+rjpjvt9iter+/kV98+h4ZBiDsvf1cnfU+ah0yFCx0PVOOa146GqlAq2iOYd/jmZ1JYv27Zl1/7hZ9Ll5zP6eafwufdStEnA1bctSgLWlWJDYfRG2fTGmZNJN/mybSsrK8PPpMvPZ/TzzuVzTy2H5e/q2+TvaakWbDoeVqfjoZ7UCraBqu23XF+hUWVgoelMtbJjRj+r0TZycXvfM9RmXrRJQAk4T8bdoKo2HKbZIJimKjfopj2+ZceMflajjbPi9nns6Z0m+St/60q5YIvQ8aDjoRsprNmc1Mar0m7ueybYasen1OYcN0iSUnwDMy3aJODs5JKAOZt0g6pyA+u7R3W141O6+Y5rbKQUX47k7+zI3+nR8aDjoWt9r9kctEeLne1Fo9vLBgOqaNI2bNuerDpYU2dZz7iBidG28GrHTzrfuLj6MJOiTQJO3m+REzBHg5tS8aZVNLq97KZaRZMbX9ubZdVGT53pMeNu8KON2dWOn3S+cXExnvydvJ/8zYeOh9lZlI6HFNZsjrbHVmsrth3o6HMGW9fLdMqWFBVnm9W5bptaZBpmUrRJwObni5jvBMzR6I1qtcZe2wZDnz3BXU93KZuaU+y1rXPdNsXEopK/zc8XIX9ToONh8n46Hprru2Dr2qTnJuSizbMYyvbPdVlWNo/8H5CA85WAi27S+oNctFnTULb/vE9vmhfyV/72QcdD8/NF6HiYJLWCrYtXNY176njRnruui0t+59yIiHjz2In48jcP1A21kTZPP+/y/HWOn/uRtlES8PR+EjB/xZtTk/n8xf3G3fCWl5dj3759ERGxYcOGOHToUN1QG6nzOzRpXHTRG12Uc4Nh1uTv6f3k72LS8aDjIWVVltJ0YccDB6dy3q7UHeiYtNRqYNKD/MYtRUrBzIs2CXiKBJwPVaakdGHv3r1TOW9X6jYYJk1ZGijbNnoNDYZ25O8p8jdfOh5O76fjgYjxS2pyVvU1YW2ehj6ujV1copTCAwezmB4pAec3ARfRuKkpOSsuTK+ynqJuQ2FcI7k41Se1hfvzSv7K35ToeDhFxwPj5NzGKxusKHtoYZvftcqgR5WfT1sWRdsoCVhNLgm46HJupJXd9MsW/7f5Xas0Hqr8nG7l/BnL38Wl40HHQ8omDUys9lyHLmdvtYmjjTozy6rs21UMqz0BfxZm+sj/Otsk4GIkYI4m3eBXWx/RZS9omzjaqNNDW2XfrmIYbWxTTv7KX07LucjQ8TCfptFh32S/rtuhXcbW1759D27M/JH/0zpWAjbbt+8EzNE0bnxN9uv6hthlbH3tq5GwOvkrf3On40HHAyyi7KZHAgCLS8eDjgdYRGv6DgAAAIByijYAAICEKdoAAAASpmgDAABImKINAAAgYZ4eCQAAU3T00DN9h0DmWhVtEpB54p115Ez+AqTl/HPfF2+989u+wyARa9e2m+BYu2iTgIxqm4B9O+/9Z8XbvznZdxgkYu2avF4MK38ZlVv+Ful4YN7c8cXPxJ7HnozjJ/ydXnRr166JbZs3tTpH7aJNAjLQRQL2bdtNl8ejPzocx0++23co9GztmqW49drL+g6jFvnLQI75G6HjgTPl3vFQtHXzptiaeTuJdCytlLy+fmnp9P843nBPXankTypxkK++c6jv65O/vnOo7+uTt1zyJ5c4SUfdnPEgEgAA6MhoYxy6omgDAGZCYxagGUUbQCY0eAFgMSnaWBgavADANFjHxrQp2gCAqdGYBWivUtFmhAKgHxq8AICRNuaaBi8AALlb03cAAAAAlCsdaTNCAQAA0D8jbQAAAAlTtAEAACRM0QYAAJAwRRsAAEDCFG0AAAAJ+384NFiAMUzlyAAAAABJRU5ErkJggg==" alt="image-20210723183046182"></p> <p>此处用一个动态图来展示:</p> <p><img src="/assets/img/123.2f761eb8.gif" alt=""></p> <p>举个栗子:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//栗子</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
<span class="token number">1.</span> 依次输出什么<span class="token operator">?</span>
<span class="token literal-property property">gb</span><span class="token operator">:</span> <span class="token keyword">undefined</span>
<span class="token literal-property property">fb</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token literal-property property">fb</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token literal-property property">fb</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token literal-property property">fe</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token literal-property property">fe</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token literal-property property">fe</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token literal-property property">ge</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token number">2.</span> 整个过程中产生了几个执行上下文<span class="token operator">?</span>  <span class="token number">5</span>
<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'gb: '</span><span class="token operator">+</span> i<span class="token punctuation">)</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span>
 <span class="token punctuation">}</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fb:'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span>
 <span class="token function">foo</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//递归调用: 在函数内部调用自己</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fe:'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token comment">//出栈 所以会 3 2 1这样的结果</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ge: '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></blockquote> <h3 id="iv-相关面试题"><a href="#iv-相关面试题" class="header-anchor">#</a> Ⅳ-相关面试题</h3> <blockquote><p><code>函数提升优先级高于变量提升,且不会被变量声明覆盖,但是会被变量赋值覆盖</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
测试题1:  先执行变量提升, 再执行函数提升

*/</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> a
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">)</span> <span class="token comment">// 'function'</span>


<span class="token comment">/*
测试题2:
*/</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>b <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// undefined</span>

<span class="token comment">/*
测试题3:
*/</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">//与此行无关</span>
<span class="token punctuation">}</span>
<span class="token function">c</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 报错  c is not a function</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></blockquote> <h2 id="_3、作用域与作用域链"><a href="#_3、作用域与作用域链" class="header-anchor">#</a> 3、作用域与作用域链</h2> <h3 id="i-作用域"><a href="#i-作用域" class="header-anchor">#</a> Ⅰ-作用域</h3> <blockquote><ol><li>理解</li></ol> <ul><li>就是一块&quot;地盘&quot;, 一个代码段所在的区域</li> <li>它是静态的(相对于上下文对象), 在编写代码时就确定了</li></ul> <ol start="2"><li>分类</li></ol> <ul><li>全局作用域</li> <li>函数作用域</li> <li>没有块作用域(ES6有了)   --&gt;(java语言也有)</li></ul> <ol start="3"><li>作用</li></ol> <ul><li>隔离变量，不同作用域下同名变量不会有冲突</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*  //没块作用域
if(true) { var c = 3 }
console.log(c)
*/</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
  b <span class="token operator">=</span> <span class="token number">20</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn()'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token comment">//100 20 300 10</span>
  <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token number">400</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar()'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token comment">//1000 20 300 400 100</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token comment">//1000 20 300 400 200</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></blockquote> <h3 id="ii-作用域与执行上下文的区别与联系"><a href="#ii-作用域与执行上下文的区别与联系" class="header-anchor">#</a> Ⅱ-作用域与执行上下文的区别与联系</h3> <blockquote><ol><li>区别1:</li></ol> <ul><li>全局作用域之外，每个函数都会创建自己的作用域，<code>作用域在函数定义时就已经确定了。而不是在函数调用时</code></li> <li>全局执行上下文环境是在全局作用域确定之后, js代码马上执行之前创建</li> <li>函数执行上下文是在调用函数时, 函数体代码执行之前创建</li></ul> <ol start="2"><li>区别2:</li></ol> <ul><li>作用域是静态的, 只要函数定义好了就一直存在, 且不会再变化</li> <li>执行上下文是动态的, 调用函数时创建, 函数调用结束时就会自动释放</li></ul> <ol start="3"><li>联系:</li></ol> <ul><li>执行上下文(对象)是从属于所在的作用域</li> <li>全局上下文环境==&gt;全局作用域</li> <li>函数上下文环境==&gt;对应的函数使用域</li></ul> <p><img src="/assets/img/image-20210727141319410.7f245884.png" alt="image-20210727141319410"></p></blockquote> <h3 id="iii-作用域链"><a href="#iii-作用域链" class="header-anchor">#</a> Ⅲ-作用域链</h3> <blockquote><ol><li>理解</li></ol> <ul><li>多个上下级关系的作用域形成的链, 它的方向是从下向上的(从内到外)</li> <li>查找变量时就是沿着作用域链来查找的</li></ul> <ol start="2"><li>查找一个变量的查找规则</li></ol> <ul><li>在当前作用域下的执行上下文中查找对应的属性, 如果有直接返回, 否则进入2</li> <li>在上一级作用域的执行上下文中查找对应的属性, 如果有直接返回, 否则进入3</li> <li>再次执行2的相同操作, 直到全局作用域, 如果还找不到就抛出找不到的异常</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">3</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></blockquote> <h3 id="iv-相关面试题-2"><a href="#iv-相关面试题-2" class="header-anchor">#</a> Ⅳ-相关面试题</h3> <h4 id="_1-作用域在函数定义时就已经确定了。而不是在函数调用时"><a href="#_1-作用域在函数定义时就已经确定了。而不是在函数调用时" class="header-anchor">#</a> ① <code>作用域在函数定义时就已经确定了。而不是在函数调用时</code></h4> <blockquote><p>作用域1:<code>作用域在函数定义时就已经确定了。而不是在函数调用时</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">show</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="/assets/img/image-20210726192714660.4ce4557c.png" alt="image-20210726192714660"></p></blockquote> <h4 id="_2-对象变量不能产生局部作用域"><a href="#_2-对象变量不能产生局部作用域" class="header-anchor">#</a> ② 对象变量不能产生局部作用域</h4> <blockquote><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">//对象变量不能产生局部作用域,所以会找到全局去,导致报错</span>
<span class="token function-variable function">fn2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span>
<span class="token comment">//console.log(this.fn2)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></blockquote> <h2 id="_4、闭包预备知识点梳理"><a href="#_4、闭包预备知识点梳理" class="header-anchor">#</a> 4、闭包预备知识点梳理</h2> <blockquote><p>在进入闭包之前,你要确保上面知识点你能掌握.你不确定 ? 噢好吧,那你就跟着我看下这部分梳理(如果懂得直接跳过即可)</p></blockquote> <h3 id="i-举个栗子分析执行上下文"><a href="#i-举个栗子分析执行上下文" class="header-anchor">#</a> Ⅰ- 举个栗子分析执行上下文</h3> <blockquote><p>在讨论闭包之前，让我们看下下方的代码(建议先只看代码自己头脑风暴再看笔记中的描述),也算是对上面知识点的梳理回顾：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">3</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">addTwo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span><span class="token operator">:</span>  <span class="token keyword">let</span> ret <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">2</span>
<span class="token number">4</span><span class="token operator">:</span>   <span class="token keyword">return</span> ret
<span class="token number">5</span><span class="token operator">:</span>  <span class="token punctuation">}</span>
<span class="token number">6</span><span class="token operator">:</span> <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">addTwo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token number">7</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>为了理解 JavaScript 引擎是如何工作的，让我们详细分析一下：</p> <ol><li>在第 1 行，我们在全局执行上下文中声明了一个新变量 a，并将赋值为 3。</li> <li>接下来就变得棘手了，第 2 行到第 5 行实际上是在一起的。这里发生了什么?</li></ol> <ul><li>我们在全局执行上下文中声明了一个名为<code>addTwo</code>的新变量,我们给它分配了什么?  --&gt;<code>一个函数定义</code>。</li> <li>两个括号{}之间的任何内容都被分配给<code>addTwo</code>，<code>函数内部的代码没有被求值，没有被执行，只是存储在一个变量中以备将来使用</code>。</li></ul> <ol start="3"><li>现在我们在第 6 行。</li></ol> <ul><li>它看起来很简单，但是这里有很多东西需要拆开分析。首先，我们在全局执行上下文中声明一个新变量，并将其标记为[<code>b</code>]，<code>变量一经声明，其值即为 undefined</code>。</li> <li>接下来，仍然在第 6 行，我们看到一个赋值操作符。我们准备给变量<code>b</code>赋一个新值，接下来我们看到一个函数被调用。<code>当您看到一个变量后面跟着一个圆括号(…)时，这就是调用函数的信号</code>，接着，每个函数都返回一些东西(值、对象或 undefined)，无论从函数返回什么，都将赋值给变量<code>b</code>。</li></ul> <ol start="4"><li>但是首先我们需要调用标记为<code>addTwo</code>的函数。JavaScript 将在其全局执行上下文内存中查找名为<code>addTwo</code>的变量。噢，它找到了一个，它是在[<code>步骤 2(或第 2 - 5 行)中定义</code>]的。变量[<code>addTwo</code>]包含一个函数定义。</li></ol> <ul><li>注意:<code>变量[a]作为参数传递给函数</code>。</li> <li>JavaScript 在全局执行上下文内存中搜索变量<code>a</code>，找到它，发现它的值是 3，并将数字 3 作为参数传递给函数，准备好执行函数。</li></ul> <ol start="5"><li>现在执行上下文将切换,创建了一个新的本地执行上下文，我们将其命名为[“<code>addTwo 执行上下文</code>”，<code>执行上下文被推送到调用堆栈上</code>。在 addTwo 执行上下文中，我们要做的第一件事是什么?</li></ol> <ul><li>你可能会说，“在 addTwo 执行上下文中声明了一个新的变量 ret”，<code>这是不对的</code>。</li> <li><code>正确的答案是</code>:我们需要先看函数的参数。<code>在 addTwo 执行上下文中声明一个新的变量[x]</code>，因为值 3 是作为参数传递的，所以变量 x 被赋值为 3。</li> <li>下一步才是在 addTwo 执行上下文中声明一个新的变量<code>ret</code>。它的值被设置为 undefined(第三行)。</li></ul> <ol start="6"><li>仍然是第 3 行，需要执行一个相加操作。</li></ol> <ul><li>首先我们需要<code>x</code>的值，JavaScript 会寻找一个变量<code>x</code>，它会首先在<code>addTwo</code>执行上下文中寻找，找到了一个值为 3。第二个操作数是数字 2。两个相加结果为 5 就被分配给变量<code>ret</code>。</li></ul> <ol start="7"><li>第 4 行，我们返回变量<code>ret</code>的内容，在 addTwo 执行上下文中查找，找到值为 5，返回，函数结束。</li> <li>第 4 - 5 行，函数结束。</li></ol> <ul><li><code>addTwo 执行上下文被销毁</code>，变量<code>x</code>和<code>ret</code>被消去了，它们已经不存在了。<code>addTwo 执行上下文从调用堆栈中弹出</code>，返回值返回给调用上下文，在这种情况下，调用上下文是全局执行上下文，因为函数<code>addTwo</code> 是从全局执行上下文调用的。</li></ul> <ol start="9"><li>现在我们继续第 4 步的内容，返回值 5 被分配给变量<code>b</code>，<code>此时实际上程序仍然在第 6 行</code>(盗梦空间既视感🐶)</li> <li>在第 7 行，<code>b</code>的值 5 被打印到控制台了。</li></ol> <p>对于一个非常简单的程序，这是一个非常冗长的解释，我们甚至还没有涉及闭包。但肯定会涉及的，不过首先我们得绕一两个弯。</p></blockquote> <h3 id="ii-举个栗子分析词法作用域"><a href="#ii-举个栗子分析词法作用域" class="header-anchor">#</a> Ⅱ-举个栗子分析词法作用域</h3> <blockquote><p>这里想说明，我们在函数执行上下文中有变量，在全局执行上下文中有变量。JavaScript 的一个复杂之处在于它如何查找变量，如果在函数执行上下文中找不到变量，它将在调用上下文中寻找它，如果在它的调用上下文中没有找到，就一直往上一级，直到它在全局执行上下文中查找为止。(如果最后找不到，它就是 undefined)。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">let</span> val1 <span class="token operator">=</span> <span class="token number">2</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">multiplyThis</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span><span class="token operator">:</span>   <span class="token keyword">let</span> ret <span class="token operator">=</span> n <span class="token operator">*</span> val1
<span class="token number">4</span><span class="token operator">:</span>    <span class="token keyword">return</span> ret
<span class="token number">5</span><span class="token operator">:</span> <span class="token punctuation">}</span>
<span class="token number">6</span><span class="token operator">:</span> <span class="token keyword">let</span> multiplied <span class="token operator">=</span> <span class="token function">multiplyThis</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token number">7</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'example of scope:'</span><span class="token punctuation">,</span> multiplied<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>下面列出向个步骤来解释一下（如果你已经熟悉了，请跳过）：</p> <ol><li>在全局执行上下文中声明一个新的变量<code>val1</code>，并将其赋值为 2。</li> <li>行 2 - 5，声明一个新的变量 <code>multiplyThis</code>，并给它分配一个函数定义。</li> <li>第六行，声明一个在全局执行上下文 <code>multiplied</code> 新变量。</li> <li>从全局执行上下文内存中查找变量<code>multiplyThis</code>，并将其作为函数执行，传递数字 6 作为参数。</li></ol> <ul><li>新函数调用(创建新执行上下文），创建一个新的 <code>multiplyThis</code> 函数执行上下文。</li> <li>在 <code>multiplyThis</code> 执行上下文中，<code>声明一个变量 n 并将其赋值为 6</code>  --&gt;声明后才会进入函数体内部执行</li></ul> <ol start="5"><li>执行函数回到第 3 行。</li></ol> <ul><li>在<code>multiplyThis</code>执行上下文中，声明一个变量<code>ret</code>。</li> <li>继续第 3 行。对两个操作数 n 和 val1 进行乘法运算.在<code>multiplyThis</code>执行上下文中查找变量 <code>n</code>。
<ul><li>我们在步骤 6 中声明了它,它的内容是数字 6。在<code>multiplyThis</code>执行上下文中查找变量<code>val1</code>。</li> <li><code>multiplyThis</code>执行上下文没有一个标记为 val1 的变量。<code>我们向调用上下文查找，调用上下文是全局执行上下文，在全局执行上下文中</code>寻找 [<code>val1</code>]。哦，是的、在那儿，它在步骤 1 中定义，数值是 2。</li></ul></li> <li>继续第 3 行。将两个操作数相乘并将其赋值给<code>ret</code>变量，6 * 2 = 12，ret 现在值为 12。</li></ul> <ol start="6"><li>返回<code>ret</code>变量，销毁<code>multiplyThis</code>执行上下文及其变量 <code>ret</code> 和 <code>n</code> 。变量 <code>val1</code> 没有被销毁，因为它是全局执行上下文的一部分。</li> <li>回到第 6 行。在调用上下文中，数字 12 赋值给 <code>multiplied</code> 的变量。</li> <li>最后在第 7 行，我们在控制台中打印 <code>multiplied</code> 变量的值</li></ol> <p>在这个例子中，我们需要记住一个函数可以访问在它的调用上下文中定义的变量，这个就是<strong>词法作用域（Lexical scope）</strong>。</p></blockquote> <h3 id="iii-返回函数的函数-高阶函数"><a href="#iii-返回函数的函数-高阶函数" class="header-anchor">#</a> Ⅲ- 返回函数的函数[<code>高阶函数</code>]</h3> <blockquote><p>在第一个例子中，函数<code>addTwo</code>返回一个数字。请记住，函数可以返回任何东西。让我们看一个返回函数的函数示例，因为这对于下方理解闭包非常重要。看栗子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">let</span> val <span class="token operator">=</span> <span class="token number">7</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">createAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">3</span><span class="token operator">:</span>   <span class="token keyword">function</span> <span class="token function">addNumbers</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">4</span><span class="token operator">:</span>     <span class="token keyword">let</span> ret <span class="token operator">=</span> a <span class="token operator">+</span> b
<span class="token number">5</span><span class="token operator">:</span>     <span class="token keyword">return</span> ret
<span class="token number">6</span><span class="token operator">:</span>   <span class="token punctuation">}</span>
<span class="token number">7</span><span class="token operator">:</span>   <span class="token keyword">return</span> addNumbers
<span class="token number">8</span><span class="token operator">:</span> <span class="token punctuation">}</span>
<span class="token number">9</span><span class="token operator">:</span> <span class="token keyword">let</span> adder <span class="token operator">=</span> <span class="token function">createAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">adder</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token number">11</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'example of function returning a function: '</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>让我们回到分步分解：</p> <ol><li>第一行。我们在全局执行上下文中声明一个变量<code>val</code>并赋值为 7。</li> <li>行 2 - 8。我们在全局执行上下文中声明了一个名为 <code>createAdder</code> 的变量，并为其分配了一个函数定义。</li></ol> <ul><li>内部的第 3 至 7 行描述了上述函数定义，和以前一样，在这一点上，我们没有直接讨论这个函数。我们只是将函数定义存储到[<code>createAdder</code>]变量中。</li></ul> <ol start="3"><li>第 9 行。</li></ol> <ul><li>我们在全局执行上下文中声明了一个名为 <code>adder</code> 的新变量，暂时，值为 undefined</li> <li>我们看到括号()，我们需要执行或调用一个函数，查找全局执行上下文的内存并查找名为<code>createAdder</code> 的变量，它是在步骤 2 中创建的。好吧，我们调用它。</li></ul> <ol start="4"><li>调用函数时，执行到第 2 行。</li></ol> <ul><li>创建一个新的<code>createAdder</code>执行上下文。我们可以在<code>createAdder</code>的执行上下文中创建自有变量。js 引擎将<code>createAdder</code>的上下文添加到调用堆栈。这个函数没有参数，让我们<code>直接跳到它的主体部分</code>.</li></ul> <ol start="5"><li>第 3 - 6 行(执行到主体函数中)。</li></ol> <ul><li>我们有一个新的函数声明，我们在<code>createAdder</code>执行上下文中创建一个变量 addNumbers。这很重要，<code>addnumber</code>只存在于<code>createAdder</code>执行上下文中。我们将函数定义存储在名为 <code>addNumbers</code> 的自有变量中。</li> <li>在第 7 行，我们返回变量<code>addNumbers</code>的内容。js 引擎查找一个名为<code>addNumbers</code>的变量并找到它，这是一个函数定义。好的，函数可以返回任何东西，包括函数定义。我们返<code>addNumbers</code>的定义。第 4 行和第 5 行括号之间的内容构成该函数定义。</li></ul> <ol start="6"><li>[return addNumbers]时，<code>createAdder</code>执行上下文将被销毁。<code>addNumbers</code> 变量不再存在。但<code>addNumbers</code>函数定义仍然存在，<code>因为它返回并赋值给了 adder 变量</code>。</li></ol> <ul><li><code>此处很重要</code>!!!此时的[<code>adder=createAdder()</code>]实际上它的值是[<code>addNumbers</code>]的函数定义而不是[<code>createAdder</code>]了,adder现在是一个匿名函数--这里有点绕,要确定理解</li></ul> <ol start="7"><li>第 10 行。我们在全局执行上下文中定义了一个新的变量 <code>sum</code>，先赋值为 undefined;</li></ol> <ul><li>接下来我们需要执行一个函数。哪个函数?
<ul><li>是名为<code>adder</code>变量中定义的函数。我们在全局执行上下文中查找它，果然找到了它，这个函数有两个参数。</li> <li>让我们查找这两个参数，第一个是我们在步骤 1 中定义的变量<code>val</code>，它表示数字 7，第二个是数字 8。</li></ul></li> <li>现在我们要执行这个函数，函数定义概述在第 3-5 行，<code>因为这个函数是匿名</code>，为了方便理解，我们暂且叫它<code>adder</code>吧。这时创建一个<code>adder</code>函数执行上下文，在<code>adder</code>执行上下文中创建了两个新变量 <code>a</code> 和 <code>b</code>。它们分别被赋值为 7 和 8，因为这些是我们在上一步传递给函数的参数。</li></ul> <ol start="8"><li>执行回到第 4 行。</li></ol> <ul><li>在<code>adder</code>执行上下文中声明了一个名为<code>ret</code>的新变量,</li> <li>将变量<code>a</code>的内容和变量<code>b</code>的内容相加得 15 并赋给 ret 变量。</li></ul> <ol start="9"><li><code>ret</code>变量从该函数返回。这个匿名函数执行上下文被销毁，从调用堆栈中删除，变量<code>a</code>、<code>b</code>和<code>ret</code>不再存在。</li> <li>返回值被分配给我们在步骤 9 中定义的<code>sum</code>变量。</li> <li>我们将<code>sum</code>的值打印到控制台。</li></ol> <p>如预期，控制台将打印 15。我们在这里确实经历了很多困难，我想在这里说明几点。首先，函数定义可以存储在变量中，函数定义在程序调用之前是不可见的。其次，每次调用函数时，都会(临时)创建一个本地执行上下文。当函数完成时，执行上下文将消失。函数在遇到 return 或右括号}时执行完成。</p></blockquote> <h5 id="高阶函数是什么"><a href="#高阶函数是什么" class="header-anchor">#</a> <code>高阶函数是什么?</code></h5> <blockquote><p>所谓高阶函数，就是一个函数就可以接收另一个函数作为参数，或者是返回一个函数--&gt;常见的高阶函数有map、reduce、filter、sort等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">ADD</span> <span class="token operator">=</span><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
调用：<span class="token constant">ADD</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>即可获得结果
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol><li>map</li></ol> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//</span>
map接受一个函数作为参数，不改变原来的数组，只是返回一个全新的数组
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> arr1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">//arr  输出[1,2,3,4,5]</span>
<span class="token comment">//arr1 输出[2,2,2,2,2]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <ol start="2"><li>reduce</li></ol> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//</span>
reduce也是返回一个全新的数组。reduce接受一个函数作为参数，这个函数要有两个形参，代表数组中的前两项，reduce会将这个函数的结果与数组中的第三项再次组成这个函数的两个形参以此类推进行累积操作
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> a<span class="token operator">+</span>b<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// 15</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <ol start="3"><li>filter</li></ol> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//</span>
filter返回过滤后的数组。filter也接收一个函数作为参数，这个函数将作用于数组中的每个元素，根据该函数每次执行后返回的布尔值来保留结果，如果是<span class="token boolean">true</span>就保留，如果是<span class="token boolean">false</span>就过滤掉（这点与map要区分）
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
 <span class="token keyword">var</span> arr3 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token comment">// [2,4]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></blockquote> <h2 id="_5、闭包"><a href="#_5、闭包" class="header-anchor">#</a> 5、闭包</h2> <blockquote><p>一个函数和对其周围状态（<strong>lexical environment，词法环境</strong>）的引用捆绑在一起（或者说函数被引用包围），这样的组合就是<strong>闭包</strong>（<strong>closure</strong>）。也就是说，闭包让你可以在一个内层函数中访问到其外层函数的作用域。在 JavaScript 中，每当创建一个函数，闭包就会在函数创建的同时被创建出来。</p> <p>本来闭包部分是看<code>尚硅谷</code>的教学视频,当时那位老师在此部分讲解的让我觉得并没特别清晰(在刚开始时没讲到重点,导致难以理解,但是在后面有提到就懂了),所以我自己看完后再去翻阅许多关于闭包的资料进行自学,随后将其梳理整合并加以自己感悟记录于此</p></blockquote> <h3 id="i-引出闭包概念"><a href="#i-引出闭包概念" class="header-anchor">#</a> Ⅰ-引出闭包概念</h3> <h4 id="_1-错误场景"><a href="#_1-错误场景" class="header-anchor">#</a> ① 错误场景</h4> <blockquote><p>需求: <code>点击某个按钮, 提示&quot;点击的是第n个按钮&quot;</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>测试1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>测试2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>测试3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--
需求: 点击某个按钮, 提示&quot;点击的是第n个按钮&quot;
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">var</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span>
<span class="token comment">//注意[btns]不是一个数组,它是一个伪数组</span>
<span class="token comment">//每次获取[btns.length]其实都是需要进行计算的(因为它是伪数组)</span>
<span class="token comment">//所以为了性能更好,在此处赋值,就只需要计算一次</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>length<span class="token operator">=</span>btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//遍历加监听</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'第'</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'个'</span><span class="token punctuation">)</span>     <span class="token comment">//结果 全是[4]</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>此处错误是,直接修改并使用全局变量[<code>i</code>],导致for循环结束后,所有点击按钮绑定的弹窗值都是[<code>i+1</code>]</p> <p>随后调用时,都会找到[<code>i</code>]这个变量,但是此时i==3,所以所有结果都是4</p> <p><img src="/assets/img/image-20210727143351376.76fc2d47.png" alt="image-20210727143351376"></p></blockquote> <h4 id="_2-将变量挂载到自身来解决"><a href="#_2-将变量挂载到自身来解决" class="header-anchor">#</a> ② 将变量挂载到自身来解决</h4> <blockquote><p>解决方式:将btn所对应的下标保存在btn上</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
<span class="token literal-property property">需求</span><span class="token operator">:</span> 点击某个按钮<span class="token punctuation">,</span> 提示<span class="token string">&quot;点击的是第n个按钮&quot;</span>
<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">var</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>length<span class="token operator">=</span>btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
<span class="token comment">//将btn所对应的下标保存在btn上</span>
btn<span class="token punctuation">.</span>index <span class="token operator">=</span> i
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//遍历加监听</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'第'</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'个'</span><span class="token punctuation">)</span>     <span class="token comment">//结果 全是[4]</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>将其放在自己的身上,需要时自己找自己拿,这样就能解决</p> <p><img src="/assets/img/image-20210727143824641.b089fe29.png" alt="image-20210727143824641"></p></blockquote> <h4 id="_3-利用闭包"><a href="#_3-利用闭包" class="header-anchor">#</a> ③ 利用闭包</h4> <blockquote><p>利用闭包知识点解决,引出下方知识点,不懂的可以带着疑问继续往下看</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>测试<span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
<span class="token comment">//利用闭包</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>length<span class="token operator">=</span>btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//此处的j是局部的,它将传入的[i]存入局部的[j]中,这样就能实现效果 </span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> btns<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'第'</span><span class="token operator">+</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'个'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><img src="/assets/img/image-20210727143824641.b089fe29.png" alt="image-20210727143824641"></p></blockquote> <h3 id="ii-举个闭包栗子分析理解"><a href="#ii-举个闭包栗子分析理解" class="header-anchor">#</a> Ⅱ-举个闭包栗子分析理解</h3> <blockquote><p>按照上方 [<code>4</code>]代码举例分析流程的方式 来尝试理解<code>闭包</code>概念</p> <p>提前给出一个闭包栗子进行分析,先看看发生什么,再去看它的概念进行印证,相信我,你会有种拨开迷雾的感受</p></blockquote> <h4 id="_1-按照正常逻辑理解"><a href="#_1-按照正常逻辑理解" class="header-anchor">#</a> ① 按照正常逻辑理解</h4> <blockquote><p>先说,此部分不是按照闭包机制进行理解,所以中途发觉不对(<code>肯定有地方不对劲</code>)请勿钻牛角尖,主要用作后方对照</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">createCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">2</span><span class="token operator">:</span>   <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>
<span class="token number">3</span><span class="token operator">:</span>   <span class="token keyword">const</span> <span class="token function-variable function">myFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">4</span><span class="token operator">:</span>     counter <span class="token operator">=</span> counter <span class="token operator">+</span> <span class="token number">1</span>
<span class="token number">5</span><span class="token operator">:</span>     <span class="token keyword">return</span> counter
<span class="token number">6</span><span class="token operator">:</span>   <span class="token punctuation">}</span>
<span class="token number">7</span><span class="token operator">:</span>   <span class="token keyword">return</span> myFunction
<span class="token number">8</span><span class="token operator">:</span> <span class="token punctuation">}</span>
<span class="token number">9</span><span class="token operator">:</span> <span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token function">createCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">11</span><span class="token operator">:</span> <span class="token keyword">const</span> c2 <span class="token operator">=</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">12</span><span class="token operator">:</span> <span class="token keyword">const</span> c3 <span class="token operator">=</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">13</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'example increment'</span><span class="token punctuation">,</span> c1<span class="token punctuation">,</span> c2<span class="token punctuation">,</span> c3<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>现在，我们已经从前几个示例中掌握了它的诀窍，让我们按照预期的方式快速执行它：  (<code>错误的流程理解,故意按照正常的逻辑流程走,做印证</code>)</p> <ol><li>行 1 - 8。我们在全局执行上下文中创建了一个新的变量<code>createCounter</code>，并赋值了一个的函数定义。</li> <li>第 9 行。</li></ol> <ul><li>我们在全局执行上下文中声明了一个名为<code>increment</code>的新变量。</li> <li>我们需要调用<code>createCounter</code>函数并将其返回值赋给<code>increment</code>变量。</li></ul> <ol start="3"><li>返回执行 行 1 - 8。调用函数，创建新的本地执行上下文。</li></ol> <ul><li>第 2 行。在本地执行上下文中，声明一个名为<code>counter</code>的新变量并赋值为 0;</li> <li>行 3 - 6。声明一个名为<code>myFunction</code>的新变量，变量在本地执行上下文中声明,变量的内容是为第 4 行和第 5 行所定义。</li> <li>第 7 行。返回<code>myFunction</code>变量的内容，删除本地执行上下文。变量<code>myFunction</code>和<code>counter</code>不再存在。此时控制权回到了调用上下文。</li></ul> <ol start="4"><li>再次回到 第 9 行</li></ol> <ul><li>在调用上下文(全局执行上下文)中，<code>createCounter</code>返回的值赋给了<code>increment</code>，变量<code>increment</code>现在包含一个函数定义内容为<code>createCounter</code>返回的函数。</li> <li>它不再标记为<code>myFunction</code>，但它的定义是相同的。在全局上下文中，它是的标记为 <code>labeledincrement</code>。</li></ul> <ol start="5"><li>第 10 行。声明一个新变量(c1)。</li></ol> <ul><li>继续第 10 行。查找<code>increment</code>变量，它是一个函数并调用它。它包含前面返回的函数定义，如第 4-5 行所定义的。</li> <li>创建一个新的执行上下文。没有参数。开始执行函数。</li></ul> <ol start="6"><li>回到 第 4 行。</li></ol> <ul><li>counter=counter + 1。在本地执行上下文中查找<code>counter</code>变量。</li> <li>我们只是创建了那个上下文，从来没有声明任何局部变量。让我们看看全局执行上下文。这里也没有<code>counter</code>变量。</li> <li>Javascript 会将其计算为 counter = undefined + 1，声明一个标记为<code>counter</code>的新局部变量，并将其赋值为 number 1，<code>因为 undefined 被当作值为 0。</code>    --&gt;此处是错误的哦,别钻牛角尖,正确的理解在下方,此处是做错误对比</li></ul> <ol start="7"><li>第 5 行。我们变量<code>counter</code>的值(1)，我们销毁本地执行上下文和<code>counter</code>变量。</li> <li>回到第 10 行。返回值(1)被赋给 c1。</li> <li>第 11 行。重复步骤 10-14，c2 也被赋值为 1。</li> <li>第 12 行。重复步骤 10-14，c3 也被赋值为 1。</li> <li>第 13 行。我们打印变量 c1 c2 和 c3 的内容。</li></ol> <p>你自己试试，看看会发生什么。你会将注意到，<code>它并不像从我上面的解释中所期望的那样记录 1,1,1。而是记录 1,2,3</code>。这个是为什么?</p></blockquote> <h4 id="_2正确的理解"><a href="#_2正确的理解" class="header-anchor">#</a> ②正确的理解</h4> <blockquote><p>不知怎么滴，<code>increment</code>函数记住了那个<code>cunter</code>的值。这是怎么回事?</p> <blockquote><ol><li>counter是全局执行上下文的一部分吗?</li></ol> <ul><li>尝试 console.log(counter)，得到undefined的结果,显然不是这样的。</li></ul> <ol start="2"><li>也许，当你调用increment时，它会以某种方式返回它创建的函数(createCounter)?</li></ol> <ul><li>这怎么可能呢?变量increment包含函数定义，而不是函数的来源，显然也不是这样的。</li></ul> <ol start="3"><li>所以一定有另一种机制。<strong>闭包</strong>，我们终于找到了，丢失的那块。</li></ol> <ul><li>**-<code>它是这样工作的，无论何时声明新函数并将其赋值给变量，都要存储函数定义和闭包。闭包包含在函数创建时作用域中的所有变量，它类似于背包。函数定义附带一个小背包，它的包中存储了函数定义创建时作用域中的所有变</code> **</li></ul></blockquote> <p><strong>所以我们上面的解释都是错的，让我们再试一次，但是这次是正确的</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">createCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">2</span><span class="token operator">:</span>   <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>
<span class="token number">3</span><span class="token operator">:</span>   <span class="token keyword">const</span> <span class="token function-variable function">myFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">4</span><span class="token operator">:</span>     counter <span class="token operator">=</span> counter <span class="token operator">+</span> <span class="token number">1</span>
<span class="token number">5</span><span class="token operator">:</span>     <span class="token keyword">return</span> counter
<span class="token number">6</span><span class="token operator">:</span>   <span class="token punctuation">}</span>
<span class="token number">7</span><span class="token operator">:</span>   <span class="token keyword">return</span> myFunction
<span class="token number">8</span><span class="token operator">:</span> <span class="token punctuation">}</span>
<span class="token number">9</span><span class="token operator">:</span> <span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token function">createCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">11</span><span class="token operator">:</span> <span class="token keyword">const</span> c2 <span class="token operator">=</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">12</span><span class="token operator">:</span> <span class="token keyword">const</span> c3 <span class="token operator">=</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">13</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'example increment'</span><span class="token punctuation">,</span> c1<span class="token punctuation">,</span> c2<span class="token punctuation">,</span> c3<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol><li>同上，第<code>1-8</code>行。我们在全局执行上下文中创建了一个新的变量<code>createCounter</code>，它得到了指定的函数定义。</li> <li>同上，第<code>9</code>行。</li></ol> <ul><li>我们在全局执行上下文中声明了一个名为<code>increment</code>的新变量。</li> <li>我们需要调用<code>createCounter</code>函数并将其返回值赋给<code>increment</code>变量。</li></ul> <ol start="3"><li>同上，第<code>1-8</code>行。调用函数，创建新的本地执行上下文。</li></ol> <ul><li>第<code>2</code>行。在本地执行上下文中，声明一个名为<code>counter</code>的新变量并赋值为 <code>0</code> 。</li> <li>第<code>3-6</code>行。声明一个名为<code>myFunction</code>的新变量，变量在本地执行上下文中声明,变量的内容是另一个函数定义。如第<code>4</code>行和第<code>5</code>行所定义，现在我们还创建了一个闭包，并将其作为函数定义的一部分。闭包包含作用域中的变量，在本例中是变量<code>counter</code>(值为<code>0</code>)。</li> <li>第<code>7</code>行。返回<code>myFunction</code>变量的内容,删除本地执行上下文。<code>myFunction</code>和<code>counter</code>不再存在。控制权交给了调用上下文，我们返回函数定义和它的闭包，闭包中包含了创建它时在作用域内的变量。</li></ul> <ol start="4"><li>回到第<code>9</code>行。</li></ol> <ul><li>在调用上下文(全局执行上下文)中，<code>createCounter</code>返回的值被指定为<code>increment</code></li> <li>变量<code>increment</code>现在包含一个函数定义(和闭包),由createCounter返回的函数定义,它不再标记为<code>myFunction</code>，但它的定义是相同的,在全局上下文中，称为<code>increment</code>。</li></ul> <ol start="5"><li>第<code>10</code>行。声明一个新变量<code>c1</code>。</li></ol> <ul><li>继续第<code>10</code>行。查找变量<code>increment</code>，它是一个函数，调用它。它包含前面返回的函数定义,如第<code>4-5</code>行所定义的。(<code>它还有一个带有变量的闭包</code>)。</li> <li>创建一个新的执行上下文，没有参数，开始执行函数。</li></ul> <ol start="6"><li>第<code>4</code>行。[<code>counter = counter + 1</code>]，寻找变量 [<code>counter</code>]，<code>在查找本地或全局执行上下文之前，让我们检查一下闭包</code>，瞧，闭包包含一个名为[<code>counter</code>]的变量，其值为<code>0</code>。在第<code>4</code>行表达式之后，它的值被设置为<code>1</code>。它再次被储存在闭包里，闭包现在包含值为<code>1</code>的变量 [<code>counter</code>]。</li> <li>第<code>5</code>行。我们返回<code>counter的值</code>，销毁本地执行上下文。</li> <li>回到第<code>10</code>行。返回值<code>1</code>被赋给变量<code>c1</code>。</li> <li>第<code>11</code>行。我们重复步骤<code>10-14</code>。这一次，在闭包中此时变量<code>counter</code>的值是1。它在第<code>12</code>行设置的，它的值被递增并以<code>2</code>的形式存储在递增函数的闭包中,<code>c2</code>被赋值为<code>2</code>。</li> <li>第<code>12</code>行。重复步骤<code>10-14</code>行,<code>c3</code>被赋值为3。</li> <li>第13行。我们打印变量<code>c1 c2</code>和<code>c3</code>的值。</li></ol> <p>** <code>你此时可能会问，是否有任何函数具有闭包，甚至是在全局范围内创建的函数?</code> **</p> <blockquote><p>答案是肯定的。在全局作用域中创建的函数创建闭包，但是由于这些函数是在全局作用域中创建的，所以它们可以访问全局作用域中的所有变量，闭包的概念并不重要。</p></blockquote> <blockquote><p>但当函数返回函数时，闭包的概念就变得更加重要了。返回的函数可以访问不属于全局作用域的变量，但它们仅存在于其闭包中。</p></blockquote></blockquote> <h3 id="iii-常见的闭包"><a href="#iii-常见的闭包" class="header-anchor">#</a> Ⅲ-常见的闭包</h3> <h4 id="_1-将函数作为另一个函数的返回值"><a href="#_1-将函数作为另一个函数的返回值" class="header-anchor">#</a> ① 将函数作为另一个函数的返回值</h4> <blockquote><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 将函数作为另一个函数的返回值</span>
<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
a<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> fn2
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></blockquote> <h4 id="_2-将函数作为实参传递给另一个函数调用"><a href="#_2-将函数作为实参传递给另一个函数调用" class="header-anchor">#</a> ② 将函数作为实参传递给另一个函数调用</h4> <blockquote><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 2. 将函数作为实参传递给另一个函数调用</span>
<span class="token keyword">function</span> <span class="token function">showDelay</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">alert</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">showDelay</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></blockquote> <h4 id="_3-高阶函数与柯里化"><a href="#_3-高阶函数与柯里化" class="header-anchor">#</a> ③ 高阶函数与柯里化</h4> <blockquote><p>有时候闭包在你甚至没有注意到它的时候就会出现，你可能已经看到了我们称为部分应用程序的示例</p> <p>当然如果你还不理解的话可以,可以完整的多看几次本笔记闭包知识点部分,或者结合上方<a href="#%E2%85%A1-%E4%B8%BE%E4%B8%AA%E9%97%AD%E5%8C%85%E6%A0%97%E5%AD%90%E5%88%86%E6%9E%90%E7%90%86%E8%A7%A3"><code>Ⅱ-举个闭包栗子分析理解</code></a>进行理解</p></blockquote> <h5 id="_1、从-es6-高阶箭头函数理解函数柯里化-运用到闭包"><a href="#_1、从-es6-高阶箭头函数理解函数柯里化-运用到闭包" class="header-anchor">#</a> 1、从 ES6 高阶箭头函数理解函数柯里化(<code>运用到闭包</code>)</h5> <blockquote><ol><li>首先看到了这样的一个例子：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token parameter">b</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>以上是一个很简单的相加函数，把它转化成 ES5 的写法如下</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> add3 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//add3表示一个指向函数的变量 可以当成函数调用名来用</span>
<span class="token function">add3</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>再简化一下，可以写成如下形式：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> param <span class="token operator">=</span> a<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token function-variable function">innerFun</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> param <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> innerFun<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li>虽然好像没什么意义，但是很显然上述使用了[<code>闭包</code>]，而且该函数的返回值是一个函数。其实，这就是<code>高阶函数的定义：以函数为参数或者返回值是函数的函数。</code></li></ol> <p><img src="/assets/img/image-20210415160945789.8a66c942.png" alt="image-20210415160945789"></p></blockquote> <h5 id="_2、柯里化"><a href="#_2、柯里化" class="header-anchor">#</a> 2、柯里化</h5> <blockquote><ol><li>图例:</li></ol> <p><img src="/assets/img/image-20210415161137977.8607f216.png" alt="image-20210415161137977"></p> <ol start="2"><li>关键就是<code>理解柯里化</code>，其实可以把它理解成，柯里化后，<code>将第一个参数变量存在函数里面了(闭包)</code>，然后本来需要n个参数的函数可以变成只需要剩下的（n - 1个）参数就可以调用，比如</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token parameter">y</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y
<span class="token keyword">let</span> add2 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">*</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
本来完成 add 这个操作，应该是这样调用
<span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token number">1.</span> 而现在 add2 函数完成同样操作只需要一个参数，这在函数式编程中广泛应用。
<span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token parameter">y</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y
<span class="token keyword">let</span> add2 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">2.</span>详细解释一下，就是 add2 函数 等价于 有了 x 这个闭包变量的 <span class="token parameter">y</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y 函数<span class="token punctuation">,</span>并且此时 x <span class="token operator">=</span> <span class="token number">2</span>，所以此时调用
<span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></blockquote> <h5 id="_4、总结"><a href="#_4、总结" class="header-anchor">#</a> 4、总结</h5> <blockquote><ol><li>如果是<code>a =&gt; b =&gt; c =&gt; {xxx}</code>这种多次柯里化的,如何理解?</li></ol> <p>理解:前<code>n - 1</code>次调用，其实是提前将参数传递进去，并没有调用最内层函数体，最后一次调用才会调用最内层函数体，并返回最内层函数体的返回值</p> <ol start="2"><li><p>结合上文可知，这里的多个连续箭头（无论俩个箭头函数三个及以上）函数连在一起 就是在柯里化。所以连续箭头函数就是多次柯里化函数的 es6 写法。</p></li> <li><p><code>调用特点</code>:let test = a =&gt; b =&gt; c =&gt; {xxx}</p></li></ol> <p>比如对于上面的 <code>test</code> 函数，它有 3 个箭头， 这个函数要被调用 3 次 <code>test(a)(b)(c)</code>，前两次调用只是在传递参数，只有最后依次调用才会返回 <code>{xxx}</code> 代码段的返回值，并且在 <code>{xxx}</code> 代码段中可以调用 a,b,c</p></blockquote> <h3 id="iv-闭包的作用"><a href="#iv-闭包的作用" class="header-anchor">#</a> Ⅳ-闭包的作用</h3> <blockquote><ol><li>使用函数内部的变量在函数执行完后, 仍然存活在内存中(延长了局部变量的生命周期)</li> <li>让函数外部可以操作(读写)到函数内部的数据(变量/函数)</li></ol> <p>问题:</p> <div class="language- extra-class"><pre><code> 1. 函数执行完后, 函数内部声明的局部变量是否还存在? 
    -  一般是不存在, 存在于闭中的变量才可能存在
 2. 在函数外部能直接访问函数内部的局部变量吗? 
    - 不能, 但我们可以通过闭包让外部操作它
</code></pre></div></blockquote> <h3 id="v-闭包的生命周期"><a href="#v-闭包的生命周期" class="header-anchor">#</a> Ⅴ-闭包的生命周期</h3> <blockquote><ol><li>产生: 在嵌套内部函数定义执行完时就产生了(不是在调用)</li> <li>死亡: 在嵌套的内部函数成为垃圾对象时</li></ol> <ul><li>即没有人指向它时死亡,通常置为[<code>null</code>],当然指向其他也行,但不安全(容易污染变量)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//闭包的生命周期</span>
<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//此时闭包就已经产生了(函数提升,实际上[fn2]提升到了第一行, 内部函数对象已经创建了)</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token keyword">function</span> <span class="token function">fn2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果时[let fn2=function(){}],那么在这行才会产生闭包</span>
    a<span class="token operator">++</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> fn2
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
f <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//闭包死亡(包含闭包的函数对象成为垃圾对象)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></blockquote> <h3 id="vi-闭包的应用"><a href="#vi-闭包的应用" class="header-anchor">#</a> Ⅵ-闭包的应用</h3> <blockquote><p>闭包的应用 : 定义JS模块</p> <ul><li>具有特定功能的js文件</li> <li>将所有的数据和功能都封装在一个函数内部(私有的)</li> <li>只向外暴露一个包信n个方法的对象或函数</li> <li>模块的使用者, 只需要通过模块暴露的对象调用方法来实现对应的功能</li></ul> <ol><li>模块定义:</li></ol> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//myModule.js</span>
<span class="token keyword">function</span> <span class="token function">myModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//私有数据</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">'My atguigu'</span>
  <span class="token comment">//操作数据的函数</span>
  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doSomething() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">doOtherthing</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doOtherthing() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//向外暴露对象(给外部使用的方法)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">doSomething</span><span class="token operator">:</span> doSomething<span class="token punctuation">,</span>
    <span class="token literal-property property">doOtherthing</span><span class="token operator">:</span> doOtherthing
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">// myModule2.js   </span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//私有数据</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">'My atguigu'</span>
  <span class="token comment">//操作数据的函数</span>
  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doSomething() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">doOtherthing</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doOtherthing() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//向外暴露对象(给外部使用的方法)</span>
  window<span class="token punctuation">.</span>myModule2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">doSomething</span><span class="token operator">:</span> doSomething<span class="token punctuation">,</span>
    <span class="token literal-property property">doOtherthing</span><span class="token operator">:</span> doOtherthing
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div></li></ul> <ol start="2"><li>模块调用</li></ol> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//调用示例</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  模块调用<span class="token number">1</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;myModule.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token function">myModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  module<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  module<span class="token punctuation">.</span><span class="token function">doOtherthing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>  模块调用<span class="token number">2</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;myModule2.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  myModule2<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  myModule2<span class="token punctuation">.</span><span class="token function">doOtherthing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul></blockquote> <h3 id="vii-闭包的缺点及解决"><a href="#vii-闭包的缺点及解决" class="header-anchor">#</a> Ⅶ-闭包的缺点及解决</h3> <blockquote><ol><li>缺点:</li></ol> <ul><li>函数执行完后, 函数内的局部变量没有释放, 占用内存时间会变长</li> <li>容易造成内存泄露</li></ul> <ol start="2"><li>解决:</li></ol> <ul><li><p>能不用闭包就不用</p></li> <li><p>及时释放</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> fn2
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
f <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//让内部函数成为垃圾对象--&gt;回收闭包</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul> <p>我还有一个解决方式,调用时直接<code>f()()</code>直接运行调用即可--&gt;匿名函数,用完自动就销毁了</p> <p><img src="/assets/img/image-20210727191229838.6c475a3d.png" alt="image-20210727191229838"></p></blockquote> <h3 id="viii-内存溢出与内存泄露"><a href="#viii-内存溢出与内存泄露" class="header-anchor">#</a> Ⅷ-内存溢出与内存泄露</h3> <blockquote><ol><li>内存溢出</li></ol> <ul><li>一种程序运行出现的错误</li> <li>当程序运行需要的内存超过了剩余的内存时, 就出抛出内存溢出的错误</li></ul> <ol start="2"><li>内存泄露</li></ol> <ul><li>占用的内存没有及时释放</li> <li><code>内存泄露积累多了就容易导致内存溢出</code></li> <li>常见的内存泄露:
<ul><li>意外的全局变量</li> <li>没有及时清理的计时器或回调函数</li> <li>闭包</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
<span class="token comment">// 1. 内存溢出</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. 内存泄露</span>
  <span class="token comment">// 意外的全局变量</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>  <span class="token comment">//不使用var let const去承接</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

 <span class="token comment">// 没有及时清理的计时器或回调函数</span>
<span class="token keyword">var</span> intervalId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//启动循环定时器后不清理</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'----'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token comment">// clearInterval(intervalId)</span>

  <span class="token comment">// 闭包</span>
<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">4</span>
  <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> fn2
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// f = null</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>不使用let const var等去声明,实际上是挂载到[<code>window</code>]上的,所以导致内存泄露<img src="/assets/img/image-20210727193110329.6222b8c0.png" alt="image-20210727193110329"></p></blockquote> <h3 id="ix-相关面试题1"><a href="#ix-相关面试题1" class="header-anchor">#</a> Ⅸ-相关面试题1</h3> <blockquote><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//代码片段一  --&gt;没有产生闭包:因为内部函数没有调用外部变量</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
<span class="token function-variable function">getNameFunc</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//?  the window</span>
<span class="token comment">//函数体的this是window</span>

<span class="token comment">//代码片段二</span>
<span class="token keyword">var</span> name2 <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> object2 <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token literal-property property">name2</span> <span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
<span class="token function-variable function">getNameFunc</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//此处的this指向是[getNameFunc],他是对象中的属性,所以this指向就是object</span>
<span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//此处用的是保存的  that</span>
<span class="token keyword">return</span> that<span class="token punctuation">.</span>name2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>object2<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?  my object</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ol><li>代码片段一:</li></ol> <ul><li>函数体的<code>this</code>指向是[<code>window</code>]</li> <li>没有产生闭包:因为内部函数没有调用外部变量</li></ul> <ol start="2"><li>代码片段二为何指向是对象?</li></ol> <ul><li>this指向是调用它的[<code>getNameFunc</code>],他是对象中的属性,所以this指向就是object</li> <li>产生了闭包</li></ul></blockquote> <h3 id="x-相关面试题2"><a href="#x-相关面试题2" class="header-anchor">#</a> Ⅹ-相关面试题2</h3> <blockquote><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token punctuation">{</span>
<span class="token function-variable function">fun</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//undefined</span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">//0</span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//0	</span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment">//0</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//undefined 0 1 2</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//undefined  0</span>
c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//1 --&gt;经过上方定义后 n固定为1</span>
c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//1 --&gt;此处是陷阱!!!  一直没有改到n,所以一直是1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/13/2023, 9:33:29 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/js/js_2.html" class="prev">
        JavaScript 基础总结
      </a></span> <span class="next"><a href="/notes/js/js_4.html">
        JavaScript 面向对象高级
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div id="goTop" class="hide-cat" data-v-bf92849a></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:270px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="270" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:270px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.468d81f0.js" defer></script><script src="/assets/js/3.98f38222.js" defer></script><script src="/assets/js/5.659b15cb.js" defer></script>
  </body>
</html>
